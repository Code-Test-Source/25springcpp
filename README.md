# 25springcpp
2025 年春程序设计思想与⽅法（C++）⼤作业

## 编译运行方式
# 项目文档

## 项目简介
本项目（25springcpp）旨在实现2025年春季“程序设计思想与方法（C++）”课程的大作业要求，通过实际编程案例帮助学生深入理解C++编程和项目管理的基本概念。

## 项目结构++
- **README.md**：项目介绍和基本操作说明文档。
- **源代码文件**：包含实现功能和测试逻辑的C++源文件。
- **Makefile**：定义项目的编译规则，便于快速构建项目。

## 编译与运行
使用MinGW工具链，通过命令行执行以下命令来编译项目：
```
mingw32-make
```
编译成功后，将生成可执行文件，可以直接运行来启动项目程序。

## 打包过程
进入release目录，执行以下命令进行打包：
```
windeployqt  SnakeGameQt.exe
```
然后使用enigma virtual box将整个文件夹拖入打包，当然也可以选择性打包

## 注意事项
- 确保本地环境已经安装MinGW及其它必要依赖。
- 根据需要可修改Makefile中的配置以适配本地开发环境。
- 如遇问题请查阅相关文档或联系项目维护者。

## 游戏规则

本游戏是一款经典的贪吃蛇，玩法简单，目标明确。

### 1. 游戏目标
* 控制你的蛇在地图上移动，吃掉出现的食物。
* 每吃掉一个食物，蛇的身体就会变长，同时你的分数也会增加。
* 尽可能地获得更高的分数，挑战自己的最高纪录。

### 2. 如何操作
* **开始游戏**: 游戏启动后会自动开始。
* **控制方向**: 使用键盘上的 **方向键 (↑ ↓ ← →)** 来改变蛇前进的方向。
* **注意**: 蛇不能直接掉头（例如，当蛇向右移动时，不能直接按左方向键）。

### 3. 游戏结束
在以下任何一种情况下，游戏都会结束：

* **撞到墙壁**: 蛇的头部碰到了游戏区域的四个边界。
* **撞到自己**: 蛇的头部碰到了自己身体的任何一个部分。

游戏结束后，屏幕上会显示您的最终得分。
  
## 项目结构

本项目包含游戏逻辑的源代码、构建系统脚本以及相关文档。以下是主要文件和目录的结构说明：

```
.
├── .vscode/            # Visual Studio Code 编辑器配置文件
├── build/              # (通常自动生成) 存放 CMake 编译过程中产生的中间文件
├── debug/              # (通常自动生成) 存放 Debug 模式下生成的可执行文件
├── release/            # (通常自动生成) 存放 Release 模式下生成的可执行文件
├── sounds/             # 存放游戏音效资源文件
├── .gitignore          # Git 配置文件，指定忽略追踪的文件和目录
├── 2025...作业(改).pdf # 项目的原始需求文档或作业说明
├── 25springcpp.pro     # Qt 项目文件，用于 qmake 构建系统
├── CMakeLists.txt      # CMake 构建系统的主要配置文件
├── Food.h/.cpp         # 定义并实现 Food 类，负责游戏中食物的生成和状态
├── GameRenderer.h/.cpp # 定义并实现 GameRenderer 类，负责将游戏画面渲染到屏幕上
├── Snake.h/.cpp        # 定义并实现 Snake 类，负责蛇的移动、增长和碰撞检测
├── SnakeGame.h/.cpp    # 定义并实现 SnakeGame 类，是游戏的主逻辑核心，负责管理游戏状态、蛇、食物以及游戏循环
├── main.cpp            # C++ 程序的主入口点
├── Makefile            # (通常自动生成) make 工具的构建脚本
└── README.md           # 项目的说明文档（也就是本文档）
```

### 核心组件说明

* **`main.cpp`**: 程序的起点，负责创建游戏窗口和启动整个 `SnakeGame`。
* **`SnakeGame`**: 游戏的大脑。它协调 `Snake`、`Food` 和 `GameRenderer`，控制游戏是正在进行、暂停还是结束。
* **`Snake`**: 代表玩家控制的蛇。处理自身的移动逻辑、吃食物后的身体增长以及检测是否撞到墙壁或自身。
* **`Food`**: 代表蛇要吃的食物。处理自身在地图上的位置。
* **`GameRenderer`**: 游戏的眼睛。它不关心游戏逻辑，只负责根据 `SnakeGame` 提供的状态把蛇、食物、得分等所有视觉元素画出来。

## 核心类介绍

本项目的核心是面向对象的设计思想，通过几个关键类的协作来完成整个游戏的功能。主要类包括 `SnakeGame`、`Snake`、`Food` 和 `GameRenderer`。

### 1. `SnakeGame` 类

`SnakeGame` 是整个游戏的**总控制器和状态机**。它不直接处理具体细节（如蛇如何移动，画面如何绘制），而是负责协调其他对象，管理游戏的整体流程。

* **主要职责**:
    * **游戏循环（Game Loop）**: 内部包含一个定时器（`QTimer`），以固定的时间间隔（如 150 毫秒）触发一次游戏状态的更新和画面的重绘。
    * **状态管理**: 维护游戏的核心状态，例如 `is_running` (游戏是否正在进行)、`is_paused` (是否暂停) 和分数 `score`。
    * **对象协调**: 创建并持有 `Snake`、`Food` 和 `GameRenderer` 的实例。在每个游戏 tick 中，它会调用 `Snake` 的 `move()` 方法，检查蛇是否吃到了 `Food`，并调用 `GameRenderer` 来绘制最新的游戏画面。
    * **事件处理**: 接收来自用户的输入（例如键盘按键），并将其转换为对 `Snake` 对象的方向控制。

### 2. `Snake` 类

`Snake` 类封装了关于“蛇”本身的所有数据和行为。它是游戏中最核心的动态对象。

* **主要职责**:
    * **数据结构**: 内部使用一个列表或双端队列（`QList` 或 `std::deque`）来存储蛇身体的每一个关节的坐标。列表的头部代表蛇头。
    * **移动逻辑**: 实现 `move()` 方法。该方法根据当前的方向（`direction`），计算出蛇头的新位置并将其添加到身体列表的前端，同时移除列表的末尾一节，从而实现前进的效果。
    * **碰撞检测**:
        * `checkCollision()`: 判断蛇头是否与墙壁或其自身的身体发生碰撞。这是判断游戏结束的关键。
        * `eat()`: 当蛇头移动到与 `Food` 对象相同的位置时，调用此方法。该方法不会移除蛇尾，从而实现身体“增长”一节的效果。
    * **方向控制**: 提供 `setDirection()` 方法，允许 `SnakeGame` 根据用户输入来改变蛇的前进方向，同时会避免蛇直接掉头（例如从向右瞬间变为向左）。

### 3. `Food` 类

`Food` 类相对简单，它代表了地图上被蛇吃掉的食物。

* **主要职责**:
    * **位置管理**: 存储食物当前的坐标。
    * **随机生成**: 实现 `generate()` 方法。当食物被吃掉后，该方法会在地图的随机一个有效位置（即不在蛇身体上）生成新的食物。

### 4. `GameRenderer` 类

`GameRenderer` 类是**视图（View）层**，它将游戏的状态数据（Model）可视化地呈现给玩家。这个类的设计遵循了**逻辑与渲染分离**的原则。

* **主要职责**:
    * **绘制所有元素**: 它接收 `SnakeGame` 传递过来的 `Snake` 和 `Food` 对象。
    * **绘制蛇**: 遍历 `Snake` 对象的身体关节列表，并将每一个关节绘制成一个方块。
    * **绘制食物**: 将 `Food` 对象绘制成一个不同颜色或形状的方块。
    * **绘制UI**: 负责绘制游戏得分、游戏结束提示等UI信息。
    * 它本身不包含任何游戏逻辑。给它什么数据，它就画什么，非常纯粹。

## 编译与运行

本项目支持使用 CMake 或 Qt Creator 进行编译和运行。请根据您的开发环境选择合适的方式。

### 前提条件

在开始之前，请确保您的系统已经安装了以下软件：

* **Git**: 用于克隆项目仓库。
* **C++ 编译器**: 例如 Windows 上的 MinGW-w64 或 MSVC，Linux 上的 GCC。
* **CMake**: 版本 3.1 或更高。
* **Qt 库**: 版本 5.x 或 6.x，并确保已将其 `bin` 目录添加到系统的 PATH 环境变量中。

---

### 方法一：使用 CMake 和命令行 (通用方法)

这种方法适用于大多数平台 (Windows, macOS, Linux)，无需特定的 IDE。

1.  **克隆项目**
    打开终端或命令行，克隆此项目到您的本地电脑：
    ```bash
    git clone [https://github.com/Code-Test-Source/25springcpp.git](https://github.com/Code-Test-Source/25springcpp.git)
    cd 25springcpp
    ```

2.  **创建构建目录**
    我们推荐在项目根目录外创建一个单独的 `build` 文件夹来存放编译产物，以保持源码目录的整洁。
    ```bash
    mkdir build
    cd build
    ```

3.  **配置项目**
    运行 `cmake` 命令来生成构建系统文件。CMake 会自动查找您系统中安装的编译器和 Qt 库。
    ```bash
    cmake ..
    ```
    *如果 CMake 无法找到 Qt，您可能需要手动指定 Qt 的路径，例如：`cmake .. -D CMAKE_PREFIX_PATH=C:/Qt/6.2.4/mingw_64`*

4.  **编译项目**
    执行构建命令来编译源代码：
    ```bash
    cmake --build .
    ```
    或者，如果您使用的是基于 Makefiles 的生成器（在 Linux 或使用 MinGW 的 Windows 上很常见），也可以直接运行：
    ```bash
    make
    ```

5.  **运行游戏**
    编译成功后，可执行文件会生成在 `build` 目录中 (或者在 `build/Debug` 或 `build/Release` 子目录中)。直接运行它即可开始游戏。
    ```bash
    # 在 Windows 上
    .\25springcpp.exe

    # 在 Linux 或 macOS 上
    ./25springcpp
    ```

---

### 方法二：使用 Qt Creator IDE (推荐 Qt 开发者使用)

如果您安装了 Qt Creator，这是最简单直接的方式。

1.  **打开项目**
    * 启动 Qt Creator。
    * 选择 **“文件 (File)” > “打开文件或项目... (Open File or Project...)”**。
    * 在弹出的文件对话框中，找到并选择项目根目录下的 `25springcpp.pro` 文件或 `CMakeLists.txt` 文件。Qt Creator 两者都支持。

2.  **配置项目 (Configure Project)**
    * Qt Creator 会提示您配置项目。请选择一个已经正确配置好的 **构建套件 (Kit)**（例如，Desktop Qt with MinGW）。
    * 点击 **“配置项目 (Configure Project)”** 按钮。

3.  **编译和运行**
    * 配置完成后，直接点击 Qt Creator 左下角的绿色 **“运行 (Run)”** 按钮 (或按快捷键 `Ctrl+R`)。
    * Qt Creator 会自动完成编译和运行的所有步骤，并启动游戏窗口。

### 游戏控制

* **方向键 (↑ ↓ ← →)**: 控制蛇的移动方向。
* **空格键 (Space)**: 暂停或继续游戏。
